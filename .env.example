# Thala Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# Development Mode & Tracing
# =============================================================================

# Mode: "dev" enables LangSmith tracing, "prod" disables it
THALA_MODE=prod

# LangSmith (only needed when THALA_MODE=dev)
# Get your API key at https://smith.langchain.com/
LANGSMITH_API_KEY=lsv2_...

# =============================================================================
# API Keys (required for respective features)
# =============================================================================

# Anthropic - Required for LLM calls (Claude models)
# Get one at https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-...

# OpenAI - Required for embeddings (default provider)
OPENAI_API_KEY=sk-...

# Firecrawl - Required for web scraping tools (cloud stealth fallback)
# Get one at https://firecrawl.dev
FIRECRAWL_API_KEY=fc-...

# Local self-hosted Firecrawl (optional, but recommended)
# If set, local Firecrawl is tried first before cloud stealth
# Start with: ./services/services.sh up (includes firecrawl service)
FIRECRAWL_LOCAL_URL=http://localhost:3002

# Skip local Firecrawl and use cloud only (for debugging)
FIRECRAWL_SKIP_LOCAL=false

# Firecrawl timeout in seconds (default: 45)
FIRECRAWL_TIMEOUT=45

# Playwright scraper timeout in milliseconds (default: 60000)
# Used as fallback when Firecrawl fails
SCRAPER_PLAYWRIGHT_TIMEOUT=60000

# =============================================================================
# Embedding Configuration
# =============================================================================

# Provider: "voyage" (default), "openai", or "ollama"
THALA_EMBEDDING_PROVIDER=voyage

# Model name (provider-specific)
# Voyage: voyage-4-large (best), voyage-4 (balanced), voyage-4-lite (fast/cheap)
# OpenAI: text-embedding-3-small, text-embedding-3-large
# Ollama: nomic-embed-text, mxbai-embed-large
THALA_EMBEDDING_MODEL=voyage-4-large

# Voyage AI API key (required if using voyage provider)
# Get one at https://dash.voyageai.com/
VOYAGE_API_KEY=pa-...

# OpenAI API key (required if using openai provider)
# OPENAI_API_KEY=sk-...

# Ollama host (only needed if using ollama provider)
THALA_OLLAMA_HOST=http://localhost:11434

# =============================================================================
# Service Hosts (defaults work for local Docker setup)
# =============================================================================

# Elasticsearch
THALA_ES_COHERENCE_HOST=http://localhost:9201
THALA_ES_FORGOTTEN_HOST=http://localhost:9200

# ChromaDB
THALA_CHROMA_HOST=localhost
THALA_CHROMA_PORT=8000

# Zotero (local API via debug-bridge)
THALA_ZOTERO_HOST=localhost
THALA_ZOTERO_PORT=23119

# Marker Document Processing
THALA_MARKER_HOST=http://localhost:8001

# =============================================================================
# Document Processing (Marker) - Optional
# =============================================================================

# Google API Key for highest-quality mode (Gemini 2.0 Flash)
# Get one at https://aistudio.google.com/app/apikey
# Used when quality="quality" preset is selected for tables/forms
GOOGLE_API_KEY=

# =============================================================================
# Task Queue & Budget Tracking
# =============================================================================

# Monthly budget in USD for LLM costs (tracked via LangSmith)
# Set to 0 for unlimited
THALA_MONTHLY_BUDGET=100.0

# Action when budget is exceeded: pause, slowdown, warn
# - pause: Stop processing new tasks until next month
# - slowdown: Double the stagger time but continue
# - warn: Log warnings but continue at normal pace
THALA_BUDGET_ACTION=pause

# Separate LangSmith project for queue-driven runs (keeps budget isolated)
# Manual runs use LANGSMITH_PROJECT (thala-dev), queue uses this
THALA_QUEUE_PROJECT=thala-queue
